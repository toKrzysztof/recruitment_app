<p-table
  [value]="contacts()"
  [lazy]="true"
  [paginator]="true"
  [rows]="pageSize"
  [totalRecords]="totalContacts"
  [rowsPerPageOptions]="[10, 20]"
  (onLazyLoad)="loadContacts($event)"
  [loading]="loading"
  [sortMode]="'single'"
  stripedRows
  [scrollable]="true"
>
  <ng-template #caption>
    <div class="table-caption">
      <h1 class="text-xl font-bold">Contacts</h1>
    </div>
  </ng-template>
  <ng-template #header>
    <tr>
      <th pSortableColumn="firstname">
        First Name <p-sortIcon field="firstName"></p-sortIcon>
      </th>
      <th pSortableColumn="lastname">
        Last Name <p-sortIcon field="lastName"></p-sortIcon>
      </th>
      <th pSortableColumn="email">Email <p-sortIcon field="email"></p-sortIcon></th>
      <th pSortableColumn="category">
        Category <p-sortIcon field="category"></p-sortIcon>
      </th>
      <th pSortableColumn="subcategory">
        Subcategory <p-sortIcon field="subcategory"></p-sortIcon>
      </th>
      <th>Action</th>
    </tr>
    <tr>
      <th>
        <input
          type="text"
          pInputText
          placeholder="Search first name"
          (input)="onColumnFilterChange('firstName', $event.target.value)"
        />
      </th>
      <th>
        <input
          type="text"
          pInputText
          placeholder="Search last name"
          (input)="onColumnFilterChange('lastName', $event.target.value)"
        />
      </th>
      <th>
        <input
          type="text"
          pInputText
          placeholder="Search email"
          (input)="onColumnFilterChange('email', $event.target.value)"
        />
      </th>
      <th>
        <input
          type="text"
          pInputText
          placeholder="Search category"
          (input)="onColumnFilterChange('category', $event.target.value)"
        />
      </th>
      <th>
        <input
          type="text"
          pInputText
          placeholder="Search subcategory"
          (input)="onColumnFilterChange('subcategory', $event.target.value)"
        />
      </th>
      <th></th>
    </tr>
  </ng-template>
  <ng-template #body let-contact>
    <tr>
      <td>{{ contact.firstName }}</td>
      <td>{{ contact.lastName }}</td>
      <td>{{ contact.email }}</td>
      <td>{{ contact.category.name }}</td>
      <td>{{ contact.subcategory.name }}</td>
      <td>
        <a [routerLink]="'/contacts/' + contact.id" pButton class="p-button"
          >View details</a
        >
      </td>
    </tr>
  </ng-template>
  <ng-template #emptymessage>
    <tr class="flex">
      <td colspan="7"><div class="no-contacts-message">No contacts found.</div></td>
    </tr>
  </ng-template>
</p-table>
